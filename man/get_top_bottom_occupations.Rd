% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_analysis.R
\name{get_top_bottom_occupations}
\alias{get_top_bottom_occupations}
\title{Get top and bottom occupations by a risk variable}
\usage{
get_top_bottom_occupations(
  data,
  var,
  n = 10,
  by_group = NULL,
  isco_key = "isco08_code"
)
}
\arguments{
\item{data}{A data.frame containing occupational data (expected to have
an \code{isco08_code} column and occupation name/title).}

\item{var}{Character name of the numeric variable to rank by (e.g. "rti_mihaylov_2019").}

\item{n}{Integer number of top/bottom occupations to return (default 10).
The result will have 2*n rows (n top + n bottom).}

\item{by_group}{Optional; if an integer (1, 2, 3, 4) then group results by ISCO
prefix of that length. If NULL (default) return overall top/bottom.}

\item{isco_key}{Character name of the ISCO key column (default "isco08_code").}
}
\value{
A data.frame with columns:
\itemize{
\item \code{isco_prefix} (if by_group is set)
\item \code{isco08_code} occupation code
\item the risk variable value
\item \code{percentile} (rank percentile 0-100)
\item \code{rank_type} ('top' or 'bottom')
}
}
\description{
Extract the top and bottom n occupations ranked by a numeric risk variable.
Optionally group results by ISCO prefix level (1-digit, 2-digit, etc.).
Returns occupations with their scores and percentile ranks for context.
}
\examples{
# Get top 15 occupations by automation risk (RTI) overall
# merged <- merge_occup_risks()
# top_rti <- get_top_bottom_occupations(merged, var = "rti_mihaylov_2019", n = 15)

# Get top/bottom 10 occupations by greenness, grouped by 1-digit ISCO major group
# by_major <- get_top_bottom_occupations(merged, var = "greenness", n = 10, by_group = 1)

}
